# Инструкция по начальной настройке и эксплуатации

## Начальная настройка

###Для функционирования системы необходимо:
###1. Токен Телеграм бота
Напишете в Телеграм https://t.me/BotFather команду "/start"
Напишите команду "/newbot"
Выберите имя вашего бота, которое будут видеть пользователи
Выберите идентификатор вашего бота (он должен заканчиваться на "bot")
Скопируйте токен, который пришлет BotFather и сохраните его в константу ВКМ_ТокенТелеграмБота

###2. Создание группы в Телеграмм
Создайте группу в Телеграм
Добавьте в группу только что созданного бота
Назначьте боту права администратора
Получите идентификатор группы
Напишите любое сообщение в группу
С помощью браузера или Postman выполните запрос https://api.telegram.org/bot[ВашТокен]/getUpdates.
В полученном JSON найдите идентификатор группы, в которой получено сообщение, и сохраните его в константу ВКМ_ИдентификаторГруппыОповещения

###3. Роли Пользователей.
Пользователям добавлены Профили пользователя.
Менеджер - Профиль пользователя Менеджер
Специалист - Профиль пользователя Специалист
Бухгалтер - Профиль пользователя Бухгалтер
Кадровик расчетник - Профиль пользователя Кадровик расчетник


##Автотестирование

### 1. Необходимо запустить 1С: Предприятие в режиме Менеджер тестирования. 
Для этого необходимо при редактировании информационной базы в поле Дополнительные параметры запуска указать: /TESTMANAGER /N Пользователь /P Пароль /Execute "путь к файлу\vanessa-automation.epf"
Где: 
Пользователь - пользователь для запуска информационной базы
Пароль - пароль для запуска информационной базы
Путь к файлу - путь к файлу vanessa-automation.epf

Далее в Менеджере тестирования необходимо выбрать тестовый клиент с указанием базы для выполнения автотестирования и пользователя.

Далее в необходимо загрузить файлы с расширением feature для проведения автотестирования.
### СозданиеОбслуживаниеКлиента.feature https://github.com/kova05b/fonecmid-diplom/blob/main/СозданиеОбслуживаниеКлиента.feature - автотест необходимо выполнять пользователем Менеджер.
Автотест создает и записывает 5 документов ОбслуживаниеКлиента для контрагентов Контрагент1, Контрагент2, Контрагент3, Контрагент4, Контрагент5, с заполнением всех полей и указанием договора с абон. обслуживанием.

### ПроведениеОбслуживаниеКлиента.feature https://github.com/kova05b/fonecmid-diplom/blob/main/ПроведениеОбслуживаниеКлиента.feature - автотест необходимо выполнить пользователем Специалист.
Автотест заполняет ранее записанные документы ОбслуживаниеКлиента, заполняет работами и проводит.

### МассовоеСозданиеАктов.feature https://github.com/kova05b/fonecmid-diplom/blob/main/МассовоеСозданиеАктов.feature - автотест необходимо выполнить пользователем Бухгалтер.
Автотест создает и проводит 5 документов РеализацияТоваровУслуг по ранее проведенным документам ОбслуживаниеКлиента в месяце декабрь 2024 г., и открывает отчет АнализыВыставленныхАктов за период 
с 01.12.2024 по 31.12.2024.

### Описание функционала:

1. Клиент связывается с менеджером и оставляет заявку на оказание услуг специалиста, указывая проблему, требующую решения.
2. Менеджер ищет доступные временные слоты и планирует выполнение заявки.
3. Во время планирования телеграм-бот уведомляет специалистов о новой поступившей заявке.
4. Специалист выполняет необходимые работы.
5. По завершении работ специалист получает подписанный лист учета рабочего времени или его скан/фото от клиента. В этом документе перечисляются виды выполненных работ и фиксируется количество часов, подлежащих оплате. В дальнейшем этот документ будет служить подтверждением выполнения работ.
6. Специалист вносит в информационную систему данные о выполненных работах, включая фактически затраченное время на каждую работу и количество часов, подлежащих оплате клиенту. К записи прикрепляет скан/фото листа учета рабочего времени.



В справочник Договоры контрагентов добавлен вид договора "Абонентское обслуживание".
При выборе данного типа в договоре появятся поля: Сумма абонентской платы и Стоимость часа работы специалиста.

### Создание документа Обслуживание клиента.
1. Необходимо заполнить все реквизиты, включая информацию о клиенте, договоре, описании работы и комментарии. Также требуется выбрать и указать данные специалиста, который будет проводить операцию. Важно не забыть установить дату и время проведения операции.
2. В случае изменения указанных данных специалисты будут уведомлены через телеграм-бота.

Пользователь с ролью Менеджер.

###  Проведение документа Обслуживание клиента.
1. При заполнении табличной части необходимо отразить информацию о проводимых работах, включая плановое и фактическое время выполнения.
2. После заполнения табличной части можно провести документ.

Пользователь с ролью Специалист.

### Заполнение Реализации товаров и услуг.
!!! Для выполнения данного функционала должны быть заполнены константы ВКМ_НоменклатураАбонентскаяПлата и ВКМ_НоменклатураРаботыСпециалиста.
1. Для автоматического заполнения документа предусмотрена кнопка "Заполнить".
2. После проверки введенных данных документ готов к проведению.
3. Также из документа имеется возможность создать и распечатать акты об оказании услуг, для чего необходимо нажать на кнопку "Акт об оказании услуг".

Пользователи с ролью Менеджер или Специалист.

### Массовое создание документа Реализаций товаров и услуг

Массовое создание документа "Реализация товаров и услуг" автоматизировано с помощью обработки "Массовое создание актов". 

Для выполнения данной процедуры необходимо выбрать соответствующий месяц и год, за который необходимо создать акты, и нажать кнопку "Создать Акты об оказании услуг".
!!! Во избежание ошибок система предоставит предупреждение: "Документы не будут созданы, если по данному договору были уже созданы документы вручную. 
Продолжить? Да или Нет." Если вы выберете "Да", операция продолжится; в случае выбора "Нет" выполнение будет остановлено. 
В табличной части отобразятся данные о договорах, по которым были созданы документы "Реализации товаров и услуг".
 
Пользователь с ролью Бухгалтер

### Расчет и начисление заработной платы  
!!! В регистре ВКМ_УсловияОплатыСотрудников необходимо указать оклад и процент от выполненных работ для расчета премий. 
!!! Для обработки заполнения графика работы, необходимо указать период, название графика, указать количество выходных дней в неделю.

### Расчет заработной платы 
Для расчета заработной платы требуются два документа:
1. Начисление заработной платы.
2. Начисление фиксированной премии.
Заполните табличные части этих документов, обязательно указав вид расчета: отпуск или оклад.
Оклад рассчитывается автоматически, исходя из средней дневной заработной платы за последние 12 месяцев, умноженной на количество отпускных дней.
Удержание НДФЛ составляет 13%. При проведении документов информация записывается в регистры расчета по основным начислениям,
дополнительным начислениям и удержаниям.

Пользователь с ролью Кадровик расчетник.


### Выплата заработной платы 
1. Создайте документ «Выплата заработной платы».
2. После нажатия на кнопку «Заполнить» происходит автоматическое заполнение данными.
3. При проведении документа информация записывается в регистр «Взаиморасчеты с сотрудниками».

Пользователь с ролью Кадровик расчетник.

### Планирование отпусков
1. Создайте документ «График отпусков» с реквизитом «Год».
2. Заполните табличную часть с указанием сотрудника, даты начала и окончания отпуска.
!!! Общая продолжительность отпуска не должна превышать 28 календарных дней. В случае превышения установленного лимита система уведомит пользователя об этом.

Пользователь с ролью Кадровик расчетник.

### Контроль заполнения графиков отпусков  
1. При нажатии на кнопку «Анализ графика» откроется форма с диаграммой Ганта, отображающая информацию о каждом сотруднике.

Пользователь с ролью Кадровик расчетник.

### Отчеты

### Выработка специалистов  
Отчет содержит информацию о количестве часов, отработанных выбранным специалистом за указанный период, а также о сумме, 
начисленной ему в виде процента от выплат клиента.

Пользователи с ролью Специалист или Кадровик расчетник.

### Анализ выставленных актов 
В отчете отображаются данные о клиентах, договорах и суммах, которые необходимо выставить клиентам.

Пользователь с ролью Бухгалтер.

### Отчет о расчетах с сотрудниками  
В этом отчете представлена информация о начисленных и выплаченных суммах каждому сотруднику за указанный период. 
Также отражаются задолженности на начало и конец отчетного периода.

Пользователь с ролью Кадровик расчетник

### Расход запланированных отпусков
Отчет за конкретный год, показывающий количество дней запланированного отпуска сотрудника за выбранный период 
и количество дней, фактически проведенных в отпуске.

Пользователь с ролью Кадровик расчетник
